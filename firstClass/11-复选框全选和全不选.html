<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style>
		*{
			margin: 0;
			padding: 0;
			text-decoration: none;
			font-size: 14px;
		}
		.box{
			width: 120px;
			height: 300px;
			border-radius: 4px;
			border: 1px solid #000;
			margin: 30px auto;
		}
		.top{
			padding: 10px;
			border-bottom: 1px solid #000;
		}
		.bottom {
			padding: 10px;
		}
		.bottom p{
			margin-bottom: 10px;
		}
	</style>
</head>
<body>
	<div class="box">
		<div class="top">
			<input type="checkbox" id="chooseAll">
			<label>全选</label>
			<a href="javascript:0;" id="link">反选</a>
		</div>
		<div class="bottom" id="bootom">
			<p><input type="checkbox"><label>选项(一)</label></p>
			<p><input type="checkbox"><label>选项(二)</label></p>
			<p><input type="checkbox"><label>选项(三)</label></p>
			<p><input type="checkbox"><label>选项(四)</label></p>
			<p><input type="checkbox"><label>选项(五)</label></p>
			<p><input type="checkbox"><label>选项(六)</label></p>
			<p><input type="checkbox"><label>选项(七)</label></p>
			<p><input type="checkbox"><label>选项(八)</label></p>
		</div>
	</div>
</body>
<script>
	//获取元素
	var link=document.getElementById("link");
	var aInputs=document.getElementsByTagName("input");
	var aLabel=document.getElementsByTagName("label")[0];
	function chooseAll(){
		for(var i=1,n=0;i<aInputs.length;i++){
			//当左边的checked值为false时，不会执行n++
			aInputs[i].checked&&n++;
		}
		//只有当n的值和aInput.length-1值相等时，才为true
		aInputs[0].checked=n==aInputs.length-1;
		aLabel.innerHTML=aInputs[0].checked?"全不选":"全选";
	}
	//全选\/全不选
	aInputs[0].onclick=function(){
		for(var i=1;i<aInputs.length;i++){
			aInputs[i].checked=this.checked;
		}
		chooseAll();
	}
	//反选
	link.onclick=function(){
		for(var i=1;i<aInputs.length;i++){
			aInputs[i].checked=!aInputs[i].checked;
		}
		chooseAll();
	}
	for(var i=1;i<aInputs.length;i++){
			aInputs[i].onclick=function(){
				chooseAll();
			}
		}
</script>
</html>